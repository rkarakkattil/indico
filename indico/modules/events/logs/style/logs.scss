/* This file is part of Indico.
 * Copyright (C) 2002 - 2018 European Organization for Nuclear Research (CERN).
 *
 * Indico is free software; you can redistribute it and/or
 * modify it under the terms of the GNU General Public License as
 * published by the Free Software Foundation; either version 3 of the
 * License, or (at your option) any later version.
 *
 * Indico is distributed in the hope that it will be useful, but
 * WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Indico; if not, see <http://www.gnu.org/licenses/>.
 */

@import 'base/utilities';

%line-style {
    line-height: 2em;
    padding: 0.25em 0;
    margin: 0;
}

#event-log {
    position: relative;
    min-height: 650px;
    display: flex;
    flex-direction: column;

    .toolbars {
        display: flex;
    }

    .paginator {
        display: flex;
    }

    .info-message-box {
        margin-top: 1em;
    }
}

.event-log-list-spinner {
    position: absolute;
    font-size: 5em;
    left: 45%;
    top: 45%;
}

.event-log-list {
    padding: 0;
    list-style-type: none;
    display: flex;
    flex-direction: column;
    flex: 1 0 0%;

    &.loading {
        background-color: #fff;
        opacity: 0.2;
        pointer-events: none;
    }

    > li h3.event-log-day-header {
        @extend %line-style;
        margin-top: 0.5em;
        border-bottom: 1px solid $pastel-gray;
    }
}

.event-log-entry-list {
    padding: 0;
    list-style-type: none;
    color: $black;

    li.log-realm-emails span.log-icon i.log-realm { @include icon-before('icon-mail'); }
    li.log-realm-event span.log-icon i.log-realm { @include icon-before('icon-time'); }
    li.log-realm-reviewing span.log-icon i.log-realm { @include icon-before('icon-user-reading'); }
    li.log-realm-participants span.log-icon i.log-realm { @include icon-before('icon-users'); }
    li.log-realm-management span.log-icon i.log-realm { @include icon-before('icon-medal'); }

    li.log-kind-positive span.log-icon i.log-kind { color: $green; }
    li.log-kind-negative span.log-icon i.log-kind { color: $red; }
    li.log-kind-change span.log-icon i.log-kind { color: $blue; }
    li.log-kind-other span.log-icon i.log-kind { display: none; }

    > li {
        @extend %line-style;
        width: 100%;
        display: flex;
        justify-content: space-between;
        align-content: baseline;
        border-bottom: 1px solid $pastel-gray;

        > *:not(:first-child) {
            margin-left: 1em;
        }

        .flexrow {
            display: flex;
            flex: 0.7;
        }

        .log-entry-description {
            cursor: pointer;
            flex: 2 0 0%;
            word-wrap: break-word;
            text-decoration: dotted underline $gray;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .log-entry-user {
            flex: 1;
            text-align: right;

            .user-fullname {
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
                width: 50%;
                display: inline-block;
                vertical-align: middle;
            }
        }

        .log-icon {
            color: $dark-gray;
            font-size: 1.2em;
            position: relative;
            width: 1.6em;

            i.log-kind {
                line-height: 1em;
                color: $blue;
                font-size: 0.7em;
                position: absolute;
                right: 3px;
                top: 1px;
            }
        }
    }
}

.log-modal-author-info {
    margin-top: 1em;
    font-size: 1.2em;

    .log-modal-user, .log-modal-time {
        color: $light-black;
    }
}

table.log-modal-details {
    width: 100%;
    margin: 0;

    td.log-caption {
        width: 200px;
    }

    .diff {
        ins {
            background: $light-green;
            text-decoration: none;
        }

        del {
            background: $light-red;
            text-decoration: none;
        }
    }
}
